syntax = "proto3";
package xid.v1;

option go_package = "github.com/cosmos/evm/x/xid/types";

import "gogoproto/gogo.proto";
import "cosmos_proto/cosmos.proto";
import "cosmos/msg/v1/msg.proto";
import "amino/amino.proto";
import "xid/v1/xid.proto";
import "xid/v1/genesis.proto";

// Msg defines the xid module's Msg service.
service Msg {
  option (cosmos.msg.v1.service) = true;

  // RegisterName registers a new name under a TLD.
  rpc RegisterName(MsgRegisterName) returns (MsgRegisterNameResponse);
  // TransferName transfers ownership of a name to a new address.
  rpc TransferName(MsgTransferName) returns (MsgTransferNameResponse);
  // UpdateProfile updates the profile metadata for a name.
  rpc UpdateProfile(MsgUpdateProfile) returns (MsgUpdateProfileResponse);
  // SetDNSRecord creates or updates a DNS record for a name.
  rpc SetDNSRecord(MsgSetDNSRecord) returns (MsgSetDNSRecordResponse);
  // DeleteDNSRecord removes a DNS record from a name.
  rpc DeleteDNSRecord(MsgDeleteDNSRecord) returns (MsgDeleteDNSRecordResponse);
  // CreateTLD creates a new top-level domain (governance only).
  rpc CreateTLD(MsgCreateTLD) returns (MsgCreateTLDResponse);
  // UpdateTLDConfig updates the configuration for a TLD (governance only).
  rpc UpdateTLDConfig(MsgUpdateTLDConfig) returns (MsgUpdateTLDConfigResponse);
  // UpdateParams updates the module parameters (governance only).
  rpc UpdateParams(MsgUpdateParams) returns (MsgUpdateParamsResponse);
}

// MsgRegisterName registers a name under a TLD.
message MsgRegisterName {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "cosmos/evm/x/xid/MsgRegisterName";

  string owner = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string name = 2;
  string tld = 3;
}

message MsgRegisterNameResponse {}

// MsgTransferName transfers ownership of a registered name.
message MsgTransferName {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "cosmos/evm/x/xid/MsgTransferName";

  string owner = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string new_owner = 2 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string name = 3;
  string tld = 4;
}

message MsgTransferNameResponse {}

// MsgUpdateProfile updates profile metadata for a name.
message MsgUpdateProfile {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "cosmos/evm/x/xid/MsgUpdateProfile";

  string owner = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string name = 2;
  string tld = 3;
  Profile profile = 4 [(gogoproto.nullable) = false];
}

message MsgUpdateProfileResponse {}

// MsgSetDNSRecord sets a DNS record for a name.
message MsgSetDNSRecord {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "cosmos/evm/x/xid/MsgSetDNSRecord";

  string owner = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string name = 2;
  string tld = 3;
  DNSRecord record = 4 [(gogoproto.nullable) = false];
}

message MsgSetDNSRecordResponse {}

// MsgDeleteDNSRecord deletes a DNS record from a name.
message MsgDeleteDNSRecord {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "cosmos/evm/x/xid/MsgDeleteDNSRecord";

  string owner = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string name = 2;
  string tld = 3;
  uint32 record_type = 4;
}

message MsgDeleteDNSRecordResponse {}

// MsgCreateTLD creates a new top-level domain. Only governance can execute this.
message MsgCreateTLD {
  option (cosmos.msg.v1.signer) = "authority";
  option (amino.name) = "cosmos/evm/x/xid/MsgCreateTLD";

  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  TLDConfig tld_config = 2 [(gogoproto.nullable) = false];
}

message MsgCreateTLDResponse {}

// MsgUpdateTLDConfig updates configuration for an existing TLD. Only governance can execute this.
message MsgUpdateTLDConfig {
  option (cosmos.msg.v1.signer) = "authority";
  option (amino.name) = "cosmos/evm/x/xid/MsgUpdateTLDConfig";

  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  TLDConfig tld_config = 2 [(gogoproto.nullable) = false];
}

message MsgUpdateTLDConfigResponse {}

// MsgUpdateParams updates the module parameters. Only governance can execute this.
message MsgUpdateParams {
  option (cosmos.msg.v1.signer) = "authority";
  option (amino.name) = "cosmos/evm/x/xid/MsgUpdateParams";

  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  Params params = 2 [(gogoproto.nullable) = false, (amino.dont_omitempty) = true];
}

message MsgUpdateParamsResponse {}
